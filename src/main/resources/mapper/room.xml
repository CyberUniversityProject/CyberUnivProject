<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"

"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.cyber.university.repository.interfaces.RoomRepository">
	<!-- 강의실 등록 -->
	<insert id="insertById">
		INSERT INTO cu_room (id,college_id)
		VALUES
		(#{id},#{collegeId})
	</insert>

	<!-- 강의실 리스트 불러오기 -->
	<select id="findAll" resultType="com.cyber.university.repository.model.Room">
		select * from cu_room order by id desc
	</select>
	<!-- 강의실 삭제 -->
	<select id="deleteById" resultType="com.cyber.university.repository.model.Room">
		delete from cu_room where id = #{id}
	</select>
	<!-- 강의실 상세 조회 -->
	<select id="findById" resultType="com.cyber.university.repository.model.Room" parameterType="String">
		select * from cu_room where id = #{id}
	</select>
	<!-- 강의실 수정하기 -->
	<update id="updateById">
		UPDATE cu_room 
		SET college_id = #{collegeId}
		WHERE id = #{id}
	</update>
	
	<select id="findAllCol"
		resultType="com.cyber.university.dto.RoomWithCollegeDto">

		select r.id, c.name from cu_room as r
		join cu_college as c
		on c.id = r.college_id;

	</select>

	<!--페이징 관련 쿼리-->
	<select id="selectRoomAmountByRoomId" resultType="Integer">
		SELECT
		count(id) FROM cu_room
		WHERE id = #{id}
	</select>
	
	
	<select id="selectRoomAmount" resultType="Integer">
		SELECT count(id)
		FROM cu_room
	</select>
	
	
	<select id="selectRoomList"
		resultType="com.cyber.university.repository.model.Room">
		SELECT * FROM cu_room
		LIMIT #{page}, 5
	</select>
	
	
	
	
	<select id="selectByRoomId"
		resultType="com.cyber.university.repository.model.Room">
		SELECT * FROM cu_room WHERE id = #{id}
	</select>
</mapper>